flowchart TD------

    A[E-ZPass Authority<br/>Monthly CSV Reports] --> B[User Upload Interface]

    B --> C{CSV File Selected?}config:config:

    C -->|No| D[Wait for Upload]

    D --> C  layout: dagre  layout: dagre

    C -->|Yes| E[Upload CSV File]

    E --> F[Parse & Validate CSV]  look: classic  look: classic

    F --> G{Valid Format?}

    G -->|No| H[Error Alert]  theme: forest   subgraph subGraph6["â° Automation"]

    G -->|Yes| I[Create Batch ID]

    I --> J[Azure Blob Storage]---        MM["ğŸ“… Monthly Report<br>1st of Month"]

    J --> K[Store CSV Data]

    K --> L[Validate Data]flowchart TB  end: forest

    L --> M{Success?}

    M -->|No| N[Error Handling] subgraph subGraph0["External Data Sources"]---

    M -->|Yes| O[Data Stored]

    O --> P[Start Analysis]        A["ğŸ“§ E-ZPass Authority<br>Monthly CSV Reports"]flowchart TB

    P --> Q[ML Engine<br/>Process Data & Make Predictions]

    Q --> R[Calculate Risk Score]  end subgraph subGraph0["External Data Sources"]

    R --> S[Store Results]

    S --> T[REST API Server] subgraph subGraph1["ğŸ“¤ Manual CSV Upload"]        A["ğŸ“§ E-ZPass Authority<br>Monthly CSV Reports<br>"]

    T --> U[Get Transactions]

    T --> V[Get Statistics]        C["ğŸ‘¤ User Upload Interface"]  end

    T --> W[Get Flagged Cases]

    U --> X[Dashboard Interface]        D{"ğŸ“„ CSV File Selected?"} subgraph subGraph1["ï¿½ Manual CSV Upload"]

    V --> X

    W --> X        E["â° Wait for Upload"]        C["ï¿½ User Upload Interface<br>Web Dashboard<br>Manual File Selection"]

    X --> Y[Transaction Table]

    X --> Z[Summary Cards]        F["ğŸ“¥ Upload CSV File"]        D{"ï¿½ CSV File Selected?"}

    X --> AA[Risk Analysis]

        G["ğŸ” Parse & Validate CSV"]        E["â° Wait for Upload"]

    style A fill:#e3f2fd,stroke:#1565c0,stroke-width:3px

    style B fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px        H{"âœ… Valid Format?"}        F["ğŸ“¥ Upload CSV<br>~4K Records"]

    style E fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px

    style F fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px        I["ğŸš¨ Error Alert"]        G["ğŸ” Parse & Validate CSV"]

    style I fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px

    style J fill:#e8f5e8,stroke:#388e3c,stroke-width:2px        J["ğŸ·ï¸ Create Batch ID"]        H{"âœ… Valid Format?"}

    style K fill:#e8f5e8,stroke:#388e3c,stroke-width:2px

    style L fill:#e8f5e8,stroke:#388e3c,stroke-width:2px  end        I["ğŸš¨ Error Alert"]

    style O fill:#e8f5e8,stroke:#388e3c,stroke-width:2px

    style Q fill:#fff3e0,stroke:#f57c00,stroke-width:2px subgraph subGraph2["ğŸ’¾ Blob Storage"]        J["ğŸ·ï¸ Create Batch ID"]

    style R fill:#fff3e0,stroke:#f57c00,stroke-width:2px

    style S fill:#fff3e0,stroke:#f57c00,stroke-width:2px        K["ğŸ—„ï¸ Azure Blob Storage"]  end

    style T fill:#e1f5fe,stroke:#0277bd,stroke-width:2px

    style U fill:#e1f5fe,stroke:#0277bd,stroke-width:2px        L["ğŸ“ Store CSV Data"] subgraph subGraph2["ğŸ’¾ Database Storage"]

    style V fill:#e1f5fe,stroke:#0277bd,stroke-width:2px

    style W fill:#e1f5fe,stroke:#0277bd,stroke-width:2px        M["ğŸ” Validate Data"]        K["ğŸ—„ï¸ PostgreSQL Database<br>Connection Pool: 5<br>localhost:5432"]

    style X fill:#e1f5fe,stroke:#0277bd,stroke-width:2px

    style Y fill:#e1f5fe,stroke:#0277bd,stroke-width:2px        N["âš ï¸ Error Handling"]        L["ğŸ“ Insert 4K Transactions<br>Table: transactions"]

    style Z fill:#e1f5fe,stroke:#0277bd,stroke-width:2px

    style AA fill:#e1f5fe,stroke:#0277bd,stroke-width:2px        O["âœ… Data Stored"]        M["ğŸ” Validate Data"]

        P["ğŸš€ Start Analysis"]        N["âš ï¸ Rollback"]

  end        O["âœ… Commit Batch"]

 subgraph subGraph3["ğŸ¤– ML Engine"]        P["ğŸš€ Start Fraud Analysis"]

        Q["âš™ï¸ ML Engine<br>Process Data & Make Predictions"]  end

        U["ğŸ” Calculate Risk Score"] subgraph subGraph3["ğŸ¤– Fraud Detection"]

        V["ğŸ’¾ Store Results"]        Q["âš™ï¸ ML Analysis Engine<br>Statistical Detection"]

  end        R["ğŸ’° Amount Check<br>Threshold: &gt;$50"]

 subgraph subGraph4["ğŸŒ API & Dashboard"]        S["ğŸ“Š Frequency Check<br>Daily Limit: &gt;15"]

        AA["ğŸ”— REST API Server"]        T["â° Time Pattern<br>11PM-6AM Unusual"]

        BB["ğŸ“‹ Get Transactions"]        U["ğŸ” Calculate Risk Score<br>0-100 Scale"]

        CC["ğŸ“Š Get Statistics"]        V["ğŸ’¾ Store Results<br>fraud_analysis table"]

        DD["ğŸš¨ Get Flagged Cases"]  end

        EE["ğŸ“± Dashboard Interface"] subgraph subGraph5["ğŸŒ API & Dashboard"]

        FF["ğŸ“‹ Transaction Table"]        AA["ğŸ”— REST API Server<br>Express.js Port: 3001"]

        GG["ğŸ“ˆ Summary Cards"]        BB["ğŸ“‹ /transactions<br>Get All Data"]

        HH["ğŸ” Risk Analysis"]        CC["ğŸ“Š /fraud-summary<br>Statistics"]

  end        DD["ğŸš¨ /high-risk<br>Flagged Cases"]

        EE["ğŸ“± React Dashboard<br>Port: 3000"]

    A -- Downloads Monthly CSV --> C        FF["ğŸ“‹ Transaction Table<br>Filter: All/Flagged"]

    C --> D        GG["ğŸ“ˆ Summary Cards<br>Total/Fraud Count/Rate"]

    D -- âŒ No --> E        HH["ğŸ” Risk Analysis<br>Fraud Details"]

    E --> D  end

    D -- âœ… Uploaded --> F subgraph subGraph6["ğŸ“ˆ Simple Reporting"]

    F --> G        II["ğŸ“… Monthly Report<br>Generate PDF Summary"]

    G --> H        JJ["ğŸ“§ Email to Stakeholders<br>Monthly Statistics"]

    H -- âŒ Invalid --> I  end

    H -- âœ… Valid --> J subgraph subGraph7["â° Automation"]

    J --> K        KK["ğŸ“§ Daily Email Check"]

    K --> L        LL["ğŸš¨ Alert Processing<br>Real-time<br>When Fraud Detected"]

    L --> M        MM["ğŸ“… Monthly Report<br>1st of Month"]

    M -- âŒ Error --> N  end

    M -- âœ… Success --> O%%  subgraph subGraph8["ğŸ“Š Performance Metrics"]

    O --> P%%         NN["ğŸ“ˆ Processing Stats<br>â€¢ Email Check: Daily<br>â€¢ CSV Processing: &lt;2min<br>â€¢ Fraud Analysis: &lt;3min<br>â€¢ Total Monthly Volume: 4K<br>â€¢ Expected Fraud: ~200 cases"]

    P --> Q%%         OO["ğŸ¯ Business Value<br>â€¢ Monthly Processing: 4K transactions<br>â€¢ Fraud Detection: &gt;85% accuracy<br>â€¢ Alert Response: &lt;5 minutes<br>â€¢ Cost Savings: 20hrs/month<br>â€¢ Zero Manual Processing"]

    Q --> U%%   end

    U --> V    A -- Downloads Monthly CSV<br>~4,000 Transactions --> C

    V --> AA    C --> D

    AA --> BB & CC & DD    D -- âŒ No --> E

    BB --> EE    E --> D

    CC --> EE    D -- âœ… Uploaded --> F

    DD --> EE    F --> G

    EE --> FF & GG & HH    G --> H

    H -- âŒ Invalid --> I

     A:::external    H -- âœ… Valid --> J

     C:::processing    J --> K

     D:::processing    K --> L

     E:::processing    L --> M

     F:::processing    M -- âŒ Error --> N

     G:::processing    M -- âœ… Success --> O

     H:::processing    O --> P

     I:::processing    P --> Q

     J:::processing    Q --> R

     K:::storage    R --> S

     L:::storage    S --> T

     M:::storage    T --> U

     N:::storage    U --> V

     O:::storage      V --> AA

     P:::ml      AA --> BB & CC & DD

     Q:::ml    BB --> EE

     U:::ml    CC --> EE

     V:::ml    DD --> EE

     AA:::api    EE --> FF & GG & HH

     BB:::api    

     CC:::api    II --> JJ

     DD:::api    

     EE:::api    MM --> II

     FF:::api     A:::external

     GG:::api     C:::processing

     HH:::api     D:::processing

     E:::processing

    classDef external fill:#e3f2fd,stroke:#1565c0,stroke-width:3px,color:#000     F:::processing

    classDef processing fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000     G:::processing

    classDef storage fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000     H:::processing

    classDef ml fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000     I:::processing

    classDef api fill:#e1f5fe,stroke:#0277bd,stroke-width:2px,color:#000     J:::processing
     K:::database
     L:::database
     M:::database
     N:::database
     O:::database
     P:::ml
     Q:::ml
     R:::ml
     S:::ml
     T:::ml
     U:::ml
     V:::ml
     AA:::api
     BB:::api
     CC:::api
     DD:::api
     EE:::api
     FF:::api
     GG:::api
     HH:::api
     II:::reporting
     JJ:::reporting
     KK:::automation
     LL:::automation
     MM:::automation
    %%  NN:::metrics
    %%  OO:::metrics
    classDef external fill:#e3f2fd,stroke:#1565c0,stroke-width:3px,color:#000
    classDef processing fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    classDef database fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
    classDef ml fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    classDef alert fill:#ffebee,stroke:#d32f2f,stroke-width:2px,color:#000
    classDef api fill:#e1f5fe,stroke:#0277bd,stroke-width:2px,color:#000
    classDef reporting fill:#f1f8e9,stroke:#689f38,stroke-width:2px,color:#000
    classDef automation fill:#f9fbe7,stroke:#827717,stroke-width:2px,color:#000
    classDef metrics fill:#fff8e1,stroke:#ff8f00,stroke-width:2px,color:#000
